{"changed":true,"filter":false,"title":"script.js","tooltip":"/test/script.js","value":"\nvar baseUrl = 'https://rest.ehrscape.com/rest/v1';\nvar queryUrl = baseUrl + '/query';\n\nvar username = \"ois.seminar\";\nvar password = \"ois4fri\";\n\nvar measures1 = [{date:'2001-10-20T12:30',weight:85,height:188,temp:38,sistolic:118,diastolic:74,oxigen:98,measurer:'Dr. Öetker'},\n\t\t\t\t{date:'2003-10-20T12:30',weight:85,height:188,temp:38,sistolic:118,diastolic:74,oxigen:98,measurer:'Dr. Öetker'},\n\t\t\t\t{date:'2005-10-20T12:30',weight:85,height:188,temp:38,sistolic:118,diastolic:74,oxigen:98,measurer:'Dr. Öetker'},\n\t\t\t\t{date:'2009-10-20T12:30',weight:85,height:188,temp:38,sistolic:118,diastolic:74,oxigen:98,measurer:'Dr. Öetker'}];\n\t\t\t\t\nvar measures2 = [{date:'2010-10-20T18:30',weight:40,height:150,temp:36,sistolic:125,diastolic:85,oxigen:92,measurer:'Dr. Clauss Nicolsen'},\n\t\t\t\t{date:'2011-10-20T18:30',weight:42,height:155,temp:36,sistolic:125,diastolic:85,oxigen:92,measurer:'Dr. Clauss Nicolsen'},\t\n\t\t\t\t{date:'2012-10-20T18:30',weight:44,height:158,temp:36.5,sistolic:125,diastolic:85,oxigen:92,measurer:'Dr. Clauss Nicolsen'},\n\t\t\t\t{date:'2013-10-20T18:30',weight:58,height:162,temp:37.2,sistolic:125,diastolic:85,oxigen:92,measurer:'Dr. Clauss Nicolsen'}];\n\t\t\t\t\nvar measures3 = [{date:'2010-03-01T07:15',weight:45,height:173,temp:38,sistolic:115,diastolic:79,oxigen:88,measurer:'Dr. Dakl'},\n\t\t\t\t{date:'2011-03-01T07:15',weight:45,height:173,temp:38,sistolic:115,diastolic:79,oxigen:88,measurer:'Dr. Dakl'},\n\t\t\t\t{date:'2012-03-01T07:15',weight:45,height:173,temp:38,sistolic:115,diastolic:79,oxigen:88,measurer:'Dr. Dakl'},\n\t\t\t\t{date:'2013-03-01T07:15',weight:45,height:173,temp:38,sistolic:115,diastolic:79,oxigen:88,measurer:'Dr. Dakl'}];\n\t\t\t\t\nvar persons = [\t{name:'David',surname:'Mesarić',birth:'1938-10-30T14:58', measures: measures1},\n\t\t\t\t{name:'Brigita',surname:'Šuler',birth:'1999-11-06T18:28', measures: measures2},\n\t\t\t\t{name:'Tina',surname:'Novak',birth:'1990-5-21T07:58', measures: measures3}];\n\t\t\t\t\nfunction getSessionId() {\n\t\n    var response = $.ajax({\n        type: \"POST\",\n        url: baseUrl + \"/session?username=\" + encodeURIComponent(username) +\n                \"&password=\" + encodeURIComponent(password),\n        async: false\n    });\n    return response.responseJSON.sessionId;\n}\n\n\nfunction kreirajEHRzaBolnikaData(ime,priimek,datumRojstva,meritve) {\n\tsessionId = getSessionId();\n\t\n\tif (!ime || !priimek || !datumRojstva || ime.trim().length == 0 || priimek.trim().length == 0 || datumRojstva.trim().length == 0) {\n\t\t$(\"#kreirajSporocilo\").append(\"<span class='obvestilo label label-warning fade-in'>Prosim vnesite zahtevane podatke!</span><br>\");\n\t} else {\n\t\t$.ajaxSetup({\n\t\t    headers: {\"Ehr-Session\": sessionId}\n\t\t});\n\t\t$.ajax({\n\t\t    url: baseUrl + \"/ehr\",\n\t\t    type: 'POST',\n\t\t    success: function (data) {\n\t\t        var ehrId = data.ehrId;\n\t\t        var partyData = {\n\t\t            firstNames: ime,\n\t\t            lastNames: priimek,\n\t\t            dateOfBirth: datumRojstva,\n\t\t            partyAdditionalInfo: [{key: \"ehrId\", value: ehrId}]\n\t\t        };\n\t\t        $.ajax({\n\t\t            url: baseUrl + \"/demographics/party\",\n\t\t            type: 'POST',\n\t\t            contentType: 'application/json',\n\t\t            data: JSON.stringify(partyData),\n\t\t            success: function (party) {\n\t\t                if (party.action == 'CREATE') {\n\t\t                \t$(\"#kreirajSporocilo\").append(\"<span class='obvestilo label label-success fade-in'> Uspešno kreirana oseba za ehrID'\" + ehrId + \"'!</span><br>\");\n\t\t                \t$('#patients').append('<option value=\"'+ehrId+'\">'+ime+\" \"+priimek +'</option>');\n\t\t                \tconsole.log(\"Uspešno kreirana oseba ehrID '\" + ehrId +\"'\");\n\t\t                \tdodajMeritveVitalnihZnakovData(ehrId,meritve);\n\t\t                }\n\t\t            },\n\t\t            error: function(err) {\n\t\t            \t$(\"#kreirajSporocilo\").append(\"<span class='obvestilo label label-danger fade-in'>Napaka '\" + JSON.parse(err.responseText).userMessage + \"'!</span><br>\");\n\t\t            \tconsole.log(JSON.parse(err.responseText).userMessage);\n\t\t            }\n\t\t        });\n\t\t    }\n\t\t});\n\t}\n}\n\nfunction kreirajEHRzaBolnika() {\n\tsessionId = getSessionId();\n\n\tvar ime = $(\"#kreirajIme\").val();\n\tvar priimek = $(\"#kreirajPriimek\").val();\n\tvar datumRojstva = $(\"#kreirajDatumRojstva\").val();\n\tvar spol = ($('#male').hasClass('active')) ? \"MALE\":\"FEMALE\";\n\tconsole.log(spol);\n\tif (!ime || !priimek || !datumRojstva || ime.trim().length == 0 || priimek.trim().length == 0 || datumRojstva.trim().length == 0) {\n\t\t$(\"#kreirajMsg\").html(\"<span class='obvestilo label label-warning fade-in'>Prosim vnesite zahtevane podatke!</span>\");\n\t} else {\n\t\t$.ajaxSetup({\n\t\t    headers: {\"Ehr-Session\": sessionId}\n\t\t});\n\t\t$.ajax({\n\t\t    url: baseUrl + \"/ehr\",\n\t\t    type: 'POST',\n\t\t    success: function (data) {\n\t\t        var ehrId = data.ehrId;\n\t\t        var partyData = {\n\t\t            firstNames: ime,\n\t\t            lastNames: priimek,\n\t\t            dateOfBirth: datumRojstva,\n\t\t            \"gender\": spol,\n\t\t            partyAdditionalInfo: [{key: \"ehrId\", value: ehrId}]\n\t\t        };\n\t\t        $.ajax({\n\t\t            url: baseUrl + \"/demographics/party\",\n\t\t            type: 'POST',\n\t\t            contentType: 'application/json',\n\t\t            data: JSON.stringify(partyData),\n\t\t            success: function (party) {\n\t\t                if (party.action == 'CREATE') {\n\t\t                    $(\"#kreirajMsg\").html(\"<span class='obvestilo label label-success fade-in'>Uspešno kreiran EHR '\" + ehrId + \"'.</span>\");\n\t\t                    console.log(\"Uspešno kreiran EHR '\" + ehrId + \"'.\");\n\t\t                   \t$('#patients').append('<option value=\"'+ehrId+'\">'+ime+\" \"+priimek +'</option>');\n\t\t                }\n\t\t            },\n\t\t            error: function(err) {\n\t\t            \t$(\"#kreirajMsg\").html(\"<span class='obvestilo label label-danger fade-in'>Napaka '\" + JSON.parse(err.responseText).userMessage + \"'!\");\n\t\t            \tconsole.log(JSON.parse(err.responseText).userMessage);\n\t\t            }\n\t\t        });\n\t\t    }\n\t\t});\n\t}\n}\n\n\nfunction dodajMeritveVitalnihZnakovData(ehrId,measures,report) {\n\tsessionId = getSessionId();\n\tconsole.log(\"dodajam vitalne znake...\");\n\tif ((!ehrId || ehrId.trim().length == 0) && report) {\n\t\tconsole.log('Prosim vnesite zahtevane podatke!');\n\t\tif(report)\n\t\t\t$(\"#kreirajMsgVitalni\").html(\"<span class='obvestilo label label-warning fade-in'>Prosim vnesite zahtevane podatke!</span>\");\n\t} else {\n\t\tfor (var i=0; i < measures.length; i++){\n\t\t\tvar datumInUra = measures[i].date;\n\t\t\tvar telesnaVisina = measures[i].height.toString();\n\t\t\tvar telesnaTeza = measures[i].weight.toString();\n\t\t\tvar telesnaTemperatura = measures[i].temp.toString();\n\t\t\tvar sistolicniKrvniTlak = measures[i].sistolic.toString();\n\t\t\tvar diastolicniKrvniTlak = measures[i].diastolic.toString();\n\t\t\tvar nasicenostKrviSKisikom = measures[i].oxigen.toString();\n\t\t\tvar h =telesnaVisina / 100; //V m\n\t\t\tvar ITM = telesnaTeza / Math.pow(h,2);\n\t\t\tvar merilec = measures[i].measurer;\n\t\t\t$.ajaxSetup({\n\t\t\t    headers: {\"Ehr-Session\": sessionId}\n\t\t\t});\n\t\t\tvar podatki = {\n\t\t\t\t// Preview Structure: https://rest.ehrscape.com/rest/v1/template/Vital%20Signs/example\n\t\t\t    \"ctx/language\": \"en\",\n\t\t\t    \"ctx/territory\": \"SI\",\n\t\t\t    \"ctx/time\": datumInUra,\n\t\t\t    \"vital_signs/height_length/any_event/body_height_length\": telesnaVisina,\n\t\t\t    \"vital_signs/body_weight/any_event/body_weight\": telesnaTeza,\n\t\t\t    \"vital_signs/body_mass_index/any_event/body_mass_index\": ITM,\n\t\t\t   \t\"vital_signs/body_temperature/any_event/temperature|magnitude\": telesnaTemperatura,\n\t\t\t    \"vital_signs/body_temperature/any_event/temperature|unit\": \"°C\",\n\t\t\t    \"vital_signs/blood_pressure/any_event/systolic\": sistolicniKrvniTlak,\n\t\t\t    \"vital_signs/blood_pressure/any_event/diastolic\": diastolicniKrvniTlak,\n\t\t\t    \"vital_signs/indirect_oximetry:0/spo2|numerator\": nasicenostKrviSKisikom\n\t\t\t};\n\t\t\tvar parametriZahteve = {\n\t\t\t    \"ehrId\": ehrId,\n\t\t\t    templateId: 'Vital Signs',\n\t\t\t    format: 'FLAT',\n\t\t\t    committer: merilec\n\t\t\t};\n\t\t\t$.ajax({\n\t\t\t    url: baseUrl + \"/composition?\" + $.param(parametriZahteve),\n\t\t\t    type: 'POST',\n\t\t\t    contentType: 'application/json',\n\t\t\t    data: JSON.stringify(podatki),\n\t\t\t    success: function (res) {\n\t\t\t    \tconsole.log(res.meta.href);\n\t\t\t    \tconsole.log(\"Uspešno.\");\n\t\t\t        $(\"#kreirajMsgVitalni\").html(\"<span class='obvestilo label label-success fade-in'>\" + \"Uspešno dodano\" + \".</span>\");\n\t\t\t        //return true;\n\t\t\t    },\n\t\t\t    error: function(err) {\n\t\t\t    \tif(report)\n\t\t\t    \t\t$(\"#kreirajMsgVitalni\").html(\"<span class='obvestilo label label-danger fade-in'>Napaka '\" + JSON.parse(err.responseText).userMessage + \"'!\");\n\t\t\t\t\tconsole.log(JSON.parse(err.responseText).userMessage);\n\t\t\t\t\t//return false;\n\t\t\t    }\n\t\t\t});\n\t\t}//End for\n\t}\n}\n\nfunction preberiEHRodBolnikaData(ehrId) {\n\tsessionId = getSessionId();\n\n\tif (!ehrId || ehrId.trim().length == 0) {\n\t\t$(\"#preberiSporocilo\").html(\"<span class='obvestilo label label-warning fade-in'>Prosim vnesite zahtevan podatek!\");\n\t} else {\n\t\t$.ajax({\n\t\t\turl: baseUrl + \"/demographics/ehr/\" + ehrId + \"/party\",\n\t\t\ttype: 'GET',\n\t\t\theaders: {\"Ehr-Session\": sessionId},\n\t    \tsuccess: function (data) {\n\t\t\t\tvar party = data.party;\n\t\t\t\tconsole.log(\"Uspesno prebrano.\");\n\t\t\t\t$('.personsName').html(party.firstNames);\n\t\t\t\t$('.personsLastName').html(party.lastNames);\n\t\t\t\t$('.personsBirth').html((party.dateOfBirth).substr(0,10));\n\t\t\t\tgetITM(ehrId);\n\t\t\t},\n\t\t\terror: function(err) {\n\t\t\t\t$(\"#preberiSporocilo\").html(\"<span class='obvestilo label label-danger fade-in'>Napaka '\" + JSON.parse(err.responseText).userMessage + \"'!\");\n\t\t\t\tconsole.log(\"Napaka, branje ...\"+JSON.parse(err.responseText).userMessage);\n\t\t\t\t\n\t\t\t}\n\t\t});\n\t}\t\n}\nfunction getITM(ehrId){\n\tsessionId = getSessionId();\n\t\tif (!ehrId || ehrId.trim().length == 0) {\n\t\t$(\"#preberiSporocilo\").html(\"<span class='obvestilo label label-warning fade-in'>Prosim vnesite zahtevan podatek!\");\n\t} else {\n\t\t$.ajax({\n\t\t\turl: baseUrl + '/view/'+ehrId+'/height',\n\t\t\ttype: 'GET',\n\t\t\theaders: {\"Ehr-Session\": sessionId},\n\t    \tsuccess: function (height) {\n\t\t\t\tconsole.log(\"Uspesno prebrano Height.\");\n\t\t\t\t\t$.ajax({\n\t\t\t\t\t\turl: baseUrl + '/view/'+ehrId+'/weight',\n\t\t\t\t\t\ttype: 'GET',\n\t\t\t\t\t\theaders: {\"Ehr-Session\": sessionId},\n\t\t\t\t\t\tsuccess: function (weight) {\n\t\t\t\t\t\t\t$('.BMIs').html(\"\");\n\t\t\t\t\t\t\tvar data = [];\n\t\t\t\t\t\t\tfor(var i = 0; i < weight.length; i++){\n\t\t\t\t\t\t\t\tvar h = parseFloat(height[i].height) / 100; //V m\n\t\t\t\t\t\t\t\tvar ITM = (parseFloat(weight[i].weight) / Math.pow(h,2)).toFixed(2);\n\t\t\t\t\t\t\t //\t$('.BMIs').append(\"<li>\"+ (weight[i].time).substr(0,10)+\" \"+ITM+\"</li>\");\n\t\t\t\t\t\t\t\tvar d = {year: (weight[i].time).substr(0,4),value: ITM }\n\t\t\t\t\t\t\t\tdata[i]= d; \n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t//drawITMChart(data);\n\t\t\t\t\t\t},\n\t\t\t\t\t\terror: function(err) {\n\t\t\t\t\t\t\t$(\"#preberiSporocilo\").html(\"<span class='obvestilo label label-danger fade-in'>Napaka '\" + JSON.parse(err.responseText).userMessage + \"'!\");\n\t\t\t\t\t\t\tconsole.log(\"Napaka, branje ...\"+JSON.parse(err.responseText).userMessage);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t},\n\t\t\terror: function(err) {\n\t\t\t\t$(\"#preberiSporocilo\").html(\"<span class='obvestilo label label-danger fade-in'>Napaka '\" + JSON.parse(err.responseText).userMessage + \"'!\");\n\t\t\t\tconsole.log(\"Napaka, branje ...\"+JSON.parse(err.responseText).userMessage);\n\t\t\t\t\n\t\t\t}\n\t\t});\n\t}\n}\n\nfunction checkIntervals(sign,val){\n\tconsole.log(\"nastavljam \"+sign+\" \"+val);\n\tvar status=\"normal\";\n\tvar link='../places/places.html';\n\tfor(var i=0;i < jsonData[sign].length; i++ ){\n\t\tvar sgn=jsonData[sign][i];\n\t\tif(sgn.max > val && sgn.min < val){\n\t\t\t$(\"#\"+sign+\"_status\").text(sgn.status);\n\t\t\t$(\"#\"+sign+\"_status\").parent().attr('class', sgn.class);\n\t\t\tif(sign === \"BMI\"){\n\t\t\t\tvar href=$('#mapLink').attr('href');\n\t\t\t\t$('#mapLink').attr('href',href+\"?\"+$.param({\"keyword\":sgn.status.toLowerCase()}));\n\t\t\t}\n\t\t\telse if(sgn.class === 'danger' && sign != \"BMI\"){\n\t\t\t\tvar href=$('#mapLink').attr('href');\n\t\t\t\t$('#mapLink').attr('href',href+\t\"&\"+$.param({\"status\":\"emergency\"}));\n\t\t\t}\n\t\t\t\n\t\t\t//console.log(\"Nastavil \"+sign);\n\t\t\tbreak;\n\t\t}\n\t}\n}\nfunction checkVitals(){\n\n\t//Najdemo zadnjo meritev\n\t\n\t   \n\tvar itm=$('#BMI_last').text();\n\tvar sis= $('#sistolic_last').text();\n\tvar dia= $('#diastolic_last').text();\n\tvar ox = $('#oximetry_last').text();\n\tvar temp = $('#temperature_last').text();\n\t\n\tcheckIntervals(\"BMI\",itm);\n\tcheckIntervals(\"Systolic\",sis);\n\tcheckIntervals(\"Diastolic\",dia);\n\tcheckIntervals(\"Temperature\",temp);\n\tcheckIntervals(\"Oximetry\",ox);\n\t$('#mapLink').show();\n\tvar url = $('#mapLink').attr('href');\n\tif(url.match('status=emergency') != null ){\n\t\t$('#results').text(messages['emergency']);\n\t}\n\telse if(url.match('keyword=normal') != null){\n\t\t$('#results').text(messages['normal']);\n\t\t$('#mapLink').hide();\n\t}\n\telse if(url.match('keyword=underweight') != null){\n\t\t$('#results').text(messages['underweight']);\n\t}\n\telse if(url.match('keyword=overweight') != null){\n\t\t$('#results').text(messages['overweight']);\n\t}\n\telse if(url.match('keyword=obese') != null){\n\t\t$('#results').text(messages['obese']);\n\t}\n}\n\nfunction drawITMChart(data){\n\t $('#ITMchart').html('');\n\t  new Morris.Line({\n\t  // ID of the element in which to draw the chart.\n\t  element: 'ITMchart',\n\t  // Chart data records -- each entry in this array corresponds to a point on\n\t  // the chart.\n\t  data: data,\n\t  // The name of the data record attribute that contains x-values.\n\t  xkey: 'year',\n\t  // A list of names of data record attributes that contain y-values.\n\t  ykeys: ['value'],\n\t  // Labels for the ykeys -- will be displayed when you hover over the\n\t  // chart.\n\t  labels: ['Value']\n\t  });\n\t \n\t\t\t\t\t\t\t\n}\n\nfunction query(ehrID){\n\t$.ajaxSetup({\n    headers: {\n        \"Ehr-Session\": sessionId\n    }\n\t});\n\n\tvar aql = \"select\"+\n\t\"  c/context/start_time/value as time,\"+\n\t\"  c/name/value as name,\"+\n\t\"  t/data[at0002]/events[at0003]/data[at0001]/items[at0004]/value/magnitude as temp,\"+\n\t\"  bp/data[at0001]/events[at0006]/data[at0003]/items[at0004]/value/magnitude as Systolic_magnitude,\"+\n\t\"  bp/data[at0001]/events[at0006]/data[at0003]/items[at0005]/value/magnitude as Diastolic_magnitude,\"+\n\t\"  ox/data[at0001]/events[at0002]/data[at0003]/items[at0006]/value/numerator as oximetry,\"+\n\t\"  bmi/data[at0001]/events[at0002]/data[at0003]/items[at0004]/value/magnitude as itm\"+\n\t\" from EHR e[ehr_id/value='\"+ehrID+\"']\"+\n\t\" contains COMPOSITION c\"+\n\t\" contains (\"+\n\t\"  OBSERVATION t[openEHR-EHR-OBSERVATION.body_temperature.v1] and\"+\n\t\"  OBSERVATION bp[openEHR-EHR-OBSERVATION.blood_pressure.v1] and\"+\n\t\"  OBSERVATION bmi[openEHR-EHR-OBSERVATION.body_mass_index.v1] and\"+\n\t\"  OBSERVATION ox[openEHR-EHR-OBSERVATION.indirect_oximetry.v1])\"+\n\t\" order by time desc\"+\n\t\" limit 1\";\n\t//console.log(aql);\n\t$.ajax({\n\t    url: baseUrl + \"/query?\" + $.param({\"aql\": aql}),\n\t    type: 'GET',\n\t    success: function (res) {\n\t        var result = res.resultSet[0];\n\t        $('.last_date').html(result.time.substr(0,10));\n\t        $('#BMI_last').text(result.itm.toFixed(2));\n\t        $('#sistolic_last').text(result.Systolic_magnitude);\n\t        $('#diastolic_last').text(result.Diastolic_magnitude);\n\t        $('#oximetry_last').text(result.oximetry);\n\t        $('#temperature_last').text(result.temp);\n\t        checkVitals();\n\t        //console.log(resulArray[0].time+\" \" + resulArray[0].temp +\" \"+resulArray[0].Systolic_magnitude+\" \"+resulArray[0].itm );\n\t    },\n\t    error: function (err){\n\t    \tconsole.log(JSON.parse(err.responseText).userMessage + JSON.parse(err.responseText).exceptionMessage)\n\t    }\n\t});\n}\nfunction dodajVitalne(){\n\tvar measurer = ($('#merilecIsti').is(\":checked\")) ? $( \"#selectToAdd option:selected\" ).text():$(\"#kreirajMerilec\").val();\n\tvar date = new Date();\n\tvar dateString = ((date.getYear()+1900)+\"-\"+ (date.getMonth()+1)+ \"-\"+date.getDate());\n  \tif(!$('#kreirajTeza').val() || !$('#kreirajVisina').val() || !$('#kreirajTemperatura').val() || !$('#kreirajSystolicni').val() || !$('#kreirajDiastolicni').val() || !$('#kreirajKisik').val() || !measurer){\n  \t\t\t$(\"#kreirajMsgVitalni\").html(\"<span class='obvestilo label label-warning fade-in'>Prosim vnesite zahtevane podatke!</span>\");\n  \t}\n  \telse{\n\t\tvar measures = [{date:dateString,weight: $('#kreirajTeza').val(),height: $('#kreirajVisina').val(),temp: $('#kreirajTemperatura').val(),sistolic: $('#kreirajSystolicni').val()\n\t\t,diastolic:$('#kreirajDiastolicni').val(),oxigen:$('#kreirajKisik').val(),measurer: measurer}];\n\t\t\n\t\tdodajMeritveVitalnihZnakovData($( \"#selectToAdd option:selected\" ).val(),measures,true);\n  \t}\n}\n\n$(document).ready(function() {\n\t\n\t\n\t$('#patients').change(function() {\n\t\t$('#mapLink').attr('href','../places/places.html');\n\t\tif($(this).val() == \"\")\n\t\t\t$('.personalInfo').slideUp(1500);\n\t\telse{\n\t\t\tpreberiEHRodBolnikaData($(this).val());\n\t\t\tquery($(this).val());\n\t\t\t$('.personalInfo').slideDown(1500);\n\t\t}\n\t});\n\t\n  $('#loadButton').on('click', function () {\n\t \tvar $btn = $(this).button('loading')\n\t\t$(\"#kreirajSporocilo\").html('<br>');\n\t\tfor (var i=0;i < persons.length; i++){\n\t\t\tkreirajEHRzaBolnikaData(persons[i].name, persons[i].surname, persons[i].birth,persons[i].measures);\n\t\t}\n\t\t $btn.button('reset')\n  })\n  \n  $('#clear').click(function(){\n  \t$('#kreirajIme').val('');\n  \t$('#kreirajPriimek').val('');\n  \t$('#kreirajDatumRojstva').val('');\n  \t$('#kreirajMsg').html('');\n  });\n  \n  $('#collapse').click(function(){\n  \t$('#pacientCreator').toggle(700);\n  \t$('#collapse').toggleClass('glyphicon-minus');\n  \t$('#collapse').toggleClass('glyphicon-plus');\n  });\n   $('#collapseMeasurement').click(function(){\n  \t$('#recordCreator').toggle(700);\n  \t$('#collapseMeasurement').toggleClass('glyphicon-minus');\n  \t$('#collapseMeasurement').toggleClass('glyphicon-plus');\n  });\n  $('#clearMeasurement').click(function(){\n  \t$('#kreirajVisina').val('');\n  \t$('#kreirajTeza').val('');\n  \t$('#kreirajTemperatura').val('');\n  \t$('#kreirajSystolicni').val('');\n  \t$('#kreirajDiastolicni').val('');\n  \t$('#kreirajKisik').val('');\n  \t$('#kreirajMerilec').val('');\n  \t$('#kreirajMsgVitalni').html('');\n  });\n  $('#selectToAdd').focus(function(){\n  \t$('#selectToAdd').html($('#patients').html());\n  });\n  $('#merilecIsti').change(function(){\n  \tif(this.checked)\n  \t\t$('#kreirajMerilec').prop('disabled', true);\n  \telse\n  \t\t$('#kreirajMerilec').prop('disabled', false);\n  });\n  $('#dodajMeritev').click(function dodajMeritev(){\n  \tdodajVitalne();\n\t});\n\t$('#selectToAdd').change(function(){\n\t\tif($('#selectToAdd').find(':selected').val() === ''){\n\t\t\t$('#recordCreator').hide(700);\n\t\t}\n\t\telse{\n\t\t\t$('#recordCreator').show(700);\n\t\t}\n\t});\n\t\n});\n\n/*\n\nhttps://developers.google.com/maps/documentation/javascript/places?csw=1#TextSearchRequests\nhttps://developers.google.com/maps/documentation/javascript/examples/place-search-pagination\nhttp://morrisjs.github.io/morris.js/\nhttp://bl.ocks.org/mccannf/1629644#jquery.tipsy.js\n\nVir podatkov:\nhttp://www.heart.org/HEARTORG/Conditions/HighBloodPressure/AboutHighBloodPressure/Understanding-Blood-Pressure-Readings_UCM_301764_Article.jsp#\nhttp://en.wikipedia.org/wiki/Human_body_temperature\n*/","undoManager":{"mark":90,"position":100,"stack":[[{"group":"doc","deltas":[{"start":{"row":386,"column":123},"end":{"row":387,"column":0},"action":"insert","lines":["",""]},{"start":{"row":387,"column":0},"end":{"row":387,"column":1},"action":"insert","lines":["\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":387,"column":1},"end":{"row":389,"column":84},"action":"insert","lines":["var date = new Date();","","$('#date').text((date.getYear()+1900)+\"-\"+ (date.getMonth()+1)+ \"-\"+date.getDate());"]}]}],[{"group":"doc","deltas":[{"start":{"row":387,"column":23},"end":{"row":388,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":388,"column":0},"end":{"row":388,"column":1},"action":"insert","lines":["\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":388,"column":1},"end":{"row":388,"column":2},"action":"insert","lines":["\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":388,"column":1},"end":{"row":388,"column":2},"action":"remove","lines":["\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":388,"column":1},"end":{"row":388,"column":16},"action":"remove","lines":["$('#date').text"]}]}],[{"group":"doc","deltas":[{"start":{"row":388,"column":1},"end":{"row":388,"column":2},"action":"insert","lines":["v"]}]}],[{"group":"doc","deltas":[{"start":{"row":388,"column":2},"end":{"row":388,"column":3},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":388,"column":3},"end":{"row":388,"column":4},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":388,"column":4},"end":{"row":388,"column":5},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":388,"column":5},"end":{"row":388,"column":6},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":388,"column":6},"end":{"row":388,"column":7},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":388,"column":7},"end":{"row":388,"column":8},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":388,"column":8},"end":{"row":388,"column":9},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":388,"column":9},"end":{"row":388,"column":10},"action":"insert","lines":["S"]}]}],[{"group":"doc","deltas":[{"start":{"row":388,"column":10},"end":{"row":388,"column":11},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":388,"column":11},"end":{"row":388,"column":12},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":388,"column":12},"end":{"row":388,"column":13},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":388,"column":13},"end":{"row":388,"column":14},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":388,"column":14},"end":{"row":388,"column":15},"action":"insert","lines":["g"]}]}],[{"group":"doc","deltas":[{"start":{"row":388,"column":15},"end":{"row":388,"column":16},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":388,"column":16},"end":{"row":388,"column":17},"action":"insert","lines":["="]}]}],[{"group":"doc","deltas":[{"start":{"row":388,"column":17},"end":{"row":388,"column":18},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":388,"column":18},"end":{"row":388,"column":19},"action":"insert","lines":["S"]}]}],[{"group":"doc","deltas":[{"start":{"row":388,"column":19},"end":{"row":388,"column":20},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":388,"column":20},"end":{"row":388,"column":21},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":388,"column":21},"end":{"row":388,"column":22},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":388,"column":22},"end":{"row":388,"column":23},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":388,"column":23},"end":{"row":388,"column":24},"action":"insert","lines":["g"]}]}],[{"group":"doc","deltas":[{"start":{"row":388,"column":24},"end":{"row":388,"column":25},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":388,"column":25},"end":{"row":388,"column":26},"action":"insert","lines":["f"]}]}],[{"group":"doc","deltas":[{"start":{"row":388,"column":26},"end":{"row":388,"column":27},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":388,"column":27},"end":{"row":388,"column":28},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":388,"column":28},"end":{"row":388,"column":29},"action":"insert","lines":["m"]}]}],[{"group":"doc","deltas":[{"start":{"row":388,"column":29},"end":{"row":388,"column":30},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":388,"column":30},"end":{"row":388,"column":31},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":388,"column":18},"end":{"row":388,"column":30},"action":"remove","lines":["String.forma"]}]}],[{"group":"doc","deltas":[{"start":{"row":388,"column":18},"end":{"row":388,"column":19},"action":"remove","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":393,"column":24},"end":{"row":393,"column":42},"action":"remove","lines":["'2001-10-20T12:30'"]},{"start":{"row":393,"column":24},"end":{"row":393,"column":25},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":393,"column":25},"end":{"row":393,"column":26},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":393,"column":26},"end":{"row":393,"column":27},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":393,"column":27},"end":{"row":393,"column":28},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":393,"column":28},"end":{"row":393,"column":29},"action":"insert","lines":["S"]}]}],[{"group":"doc","deltas":[{"start":{"row":393,"column":29},"end":{"row":393,"column":30},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":393,"column":30},"end":{"row":393,"column":31},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":393,"column":31},"end":{"row":393,"column":32},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":393,"column":32},"end":{"row":393,"column":33},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":393,"column":33},"end":{"row":393,"column":34},"action":"insert","lines":["g"]}]}],[{"group":"doc","deltas":[{"start":{"row":245,"column":7},"end":{"row":245,"column":8},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":245,"column":8},"end":{"row":245,"column":9},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":365,"column":1},"end":{"row":365,"column":2},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":365,"column":2},"end":{"row":365,"column":3},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":245,"column":8},"end":{"row":245,"column":9},"action":"remove","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":245,"column":7},"end":{"row":245,"column":8},"action":"remove","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":245,"column":7},"end":{"row":245,"column":8},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":245,"column":8},"end":{"row":245,"column":9},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":400,"column":30},"end":{"row":401,"column":0},"action":"insert","lines":["",""]},{"start":{"row":401,"column":0},"end":{"row":401,"column":1},"action":"insert","lines":["\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":401,"column":1},"end":{"row":401,"column":2},"action":"insert","lines":["$"]}]}],[{"group":"doc","deltas":[{"start":{"row":401,"column":1},"end":{"row":401,"column":2},"action":"remove","lines":["$"]}]}],[{"group":"doc","deltas":[{"start":{"row":401,"column":1},"end":{"row":401,"column":2},"action":"insert","lines":["$"]}]}],[{"group":"doc","deltas":[{"start":{"row":401,"column":2},"end":{"row":401,"column":4},"action":"insert","lines":["()"]}]}],[{"group":"doc","deltas":[{"start":{"row":401,"column":3},"end":{"row":401,"column":5},"action":"insert","lines":["''"]}]}],[{"group":"doc","deltas":[{"start":{"row":401,"column":4},"end":{"row":401,"column":5},"action":"insert","lines":["#"]}]}],[{"group":"doc","deltas":[{"start":{"row":401,"column":5},"end":{"row":401,"column":6},"action":"insert","lines":["g"]}]}],[{"group":"doc","deltas":[{"start":{"row":401,"column":6},"end":{"row":401,"column":7},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":401,"column":7},"end":{"row":401,"column":8},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":401,"column":8},"end":{"row":401,"column":9},"action":"insert","lines":["p"]}]}],[{"group":"doc","deltas":[{"start":{"row":401,"column":9},"end":{"row":401,"column":10},"action":"insert","lines":["h"]}]}],[{"group":"doc","deltas":[{"start":{"row":401,"column":5},"end":{"row":401,"column":10},"action":"remove","lines":["graph"]},{"start":{"row":401,"column":5},"end":{"row":401,"column":6},"action":"insert","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":401,"column":6},"end":{"row":401,"column":7},"action":"insert","lines":["h"]}]}],[{"group":"doc","deltas":[{"start":{"row":401,"column":7},"end":{"row":401,"column":8},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":401,"column":8},"end":{"row":401,"column":9},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":401,"column":9},"end":{"row":401,"column":10},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":401,"column":12},"end":{"row":401,"column":13},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":401,"column":13},"end":{"row":401,"column":14},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":401,"column":14},"end":{"row":401,"column":15},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":401,"column":15},"end":{"row":401,"column":16},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":401,"column":16},"end":{"row":401,"column":17},"action":"insert","lines":["S"]}]}],[{"group":"doc","deltas":[{"start":{"row":401,"column":17},"end":{"row":401,"column":18},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":401,"column":18},"end":{"row":401,"column":19},"action":"insert","lines":["z"]}]}],[{"group":"doc","deltas":[{"start":{"row":401,"column":19},"end":{"row":401,"column":20},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":401,"column":19},"end":{"row":401,"column":20},"action":"remove","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":401,"column":19},"end":{"row":401,"column":20},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":401,"column":20},"end":{"row":401,"column":22},"action":"insert","lines":["()"]}]}],[{"group":"doc","deltas":[{"start":{"row":401,"column":22},"end":{"row":401,"column":23},"action":"insert","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":399,"column":0},"end":{"row":400,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":399,"column":0},"end":{"row":405,"column":31},"action":"insert","lines":["function updateWindow(){","    x = w.innerWidth || e.clientWidth || g.clientWidth;","    y = w.innerHeight|| e.clientHeight|| g.clientHeight;","","    svg.attr(\"width\", x).attr(\"height\", y);","}","window.onresize = updateWindow;"]}]}],[{"group":"doc","deltas":[{"start":{"row":408,"column":1},"end":{"row":408,"column":23},"action":"remove","lines":["$('#chart').setSize();"]}]}],[{"group":"doc","deltas":[{"start":{"row":399,"column":0},"end":{"row":405,"column":31},"action":"remove","lines":["function updateWindow(){","    x = w.innerWidth || e.clientWidth || g.clientWidth;","    y = w.innerHeight|| e.clientHeight|| g.clientHeight;","","    svg.attr(\"width\", x).attr(\"height\", y);","}","window.onresize = updateWindow;"]}]}],[{"group":"doc","deltas":[{"start":{"row":399,"column":0},"end":{"row":400,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":468,"column":4},"end":{"row":468,"column":5},"action":"remove","lines":["\t"]},{"start":{"row":468,"column":4},"end":{"row":469,"column":0},"action":"insert","lines":["",""]},{"start":{"row":469,"column":0},"end":{"row":469,"column":1},"action":"insert","lines":["\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":401,"column":1},"end":{"row":402,"column":0},"action":"insert","lines":["",""]},{"start":{"row":402,"column":0},"end":{"row":402,"column":1},"action":"insert","lines":["\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":402,"column":1},"end":{"row":402,"column":2},"action":"insert","lines":["$"]}]}],[{"group":"doc","deltas":[{"start":{"row":402,"column":2},"end":{"row":402,"column":4},"action":"insert","lines":["()"]}]}],[{"group":"doc","deltas":[{"start":{"row":402,"column":3},"end":{"row":402,"column":5},"action":"insert","lines":["''"]}]}],[{"group":"doc","deltas":[{"start":{"row":402,"column":5},"end":{"row":402,"column":6},"action":"remove","lines":[")"]}]}],[{"group":"doc","deltas":[{"start":{"row":402,"column":4},"end":{"row":402,"column":5},"action":"remove","lines":["'"]}]}],[{"group":"doc","deltas":[{"start":{"row":402,"column":3},"end":{"row":402,"column":4},"action":"remove","lines":["'"]}]}],[{"group":"doc","deltas":[{"start":{"row":402,"column":2},"end":{"row":402,"column":3},"action":"remove","lines":["("]}]}],[{"group":"doc","deltas":[{"start":{"row":402,"column":1},"end":{"row":402,"column":2},"action":"remove","lines":["$"]}]}]]},"ace":{"folds":[],"scrolltop":4324.2475509643555,"scrollleft":0,"selection":{"start":{"row":402,"column":1},"end":{"row":402,"column":1},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":22,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1418408308317}
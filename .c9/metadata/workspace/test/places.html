{"changed":true,"filter":false,"title":"places.html","tooltip":"/test/places.html","value":"<!DOCTYPE html>\n<html>\n  <head>\n    <meta name=\"viewport\" content=\"initial-scale=1.0, user-scalable=no\">\n    <meta charset=\"utf-8\">\n    <style>\n      html, body, #map-canvas {\n        height: 100%;\n        margin: 0px;\n        padding: 0px\n      }\n    </style>\n    <title>Place search pagination</title>\n    <script src=\"https://maps.googleapis.com/maps/api/js?libraries=places\"></script>\n    <script>\nvar map, placesList;\n\nfunction initialize() {\n  var pyrmont = new google.maps.LatLng(-33.8665433, 151.1956316);\n\n  map = new google.maps.Map(document.getElementById('map-canvas'), {\n    center: pyrmont,\n    zoom: 17\n  });\n\n  var request = {\n    location: pyrmont,\n    radius: 500,\n    types: ['store']\n  };\n\n  placesList = document.getElementById('places');\n\n  var service = new google.maps.places.PlacesService(map);\n  service.nearbySearch(request, callback);\n}\n\nfunction callback(results, status, pagination) {\n  if (status != google.maps.places.PlacesServiceStatus.OK) {\n    return;\n  } else {\n    createMarkers(results);\n\n    if (pagination.hasNextPage) {\n      var moreButton = document.getElementById('more');\n\n      moreButton.disabled = false;\n\n      google.maps.event.addDomListenerOnce(moreButton, 'click',\n          function() {\n        moreButton.disabled = true;\n        pagination.nextPage();\n      });\n    }\n  }\n}\n\nfunction createMarkers(places) {\n  var bounds = new google.maps.LatLngBounds();\n\n  for (var i = 0, place; place = places[i]; i++) {\n    var image = {\n      url: place.icon,\n      size: new google.maps.Size(71, 71),\n      origin: new google.maps.Point(0, 0),\n      anchor: new google.maps.Point(17, 34),\n      scaledSize: new google.maps.Size(25, 25)\n    };\n\n    var marker = new google.maps.Marker({\n      map: map,\n      icon: image,\n      title: place.name,\n      position: place.geometry.location\n    });\n\n    placesList.innerHTML += '<li>' + place.name + '</li>';\n\n    bounds.extend(place.geometry.location);\n  }\n  map.fitBounds(bounds);\n}\n\ngoogle.maps.event.addDomListener(window, 'load', initialize);\n\n    </script>\n    <style>\n      #results {\n        font-family: Arial, Helvetica, sans-serif;\n        position: absolute;\n        right: 5px;\n        top: 50%;\n        margin-top: -195px;\n        height: 380px;\n        width: 200px;\n        padding: 5px;\n        z-index: 5;\n        border: 1px solid #999;\n        background: #fff;\n      }\n      h2 {\n        font-size: 22px;\n        margin: 0 0 5px 0;\n      }\n      ul {\n        list-style-type: none;\n        padding: 0;\n        margin: 0;\n        height: 321px;\n        width: 200px;\n        overflow-y: scroll;\n      }\n      li {\n        background-color: #f1f1f1;\n        padding: 10px;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        overflow: hidden;\n      }\n      li:nth-child(odd) {\n        background-color: #fcfcfc;\n      }\n      #more {\n        width: 100%;\n        margin: 5px 0 0 0;\n      }\n    </style>\n  </head>\n  <body>\n    <div id=\"map-canvas\"></div>\n    <div id=\"results\">\n      <h2>Results</h2>\n      <ul id=\"places\"></ul>\n      <button id=\"more\">More results</button>\n    </div>\n  </body>\n</html>","undoManager":{"mark":0,"position":4,"stack":[[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":136,"column":7},"action":"insert","lines":["<!DOCTYPE html>","<html>","  <head>","    <meta name=\"viewport\" content=\"initial-scale=1.0, user-scalable=no\">","    <meta charset=\"utf-8\">","    <style>","      html, body, #map-canvas {","        height: 100%;","        margin: 0px;","        padding: 0px","      }","    </style>","    <title>Place search pagination</title>","    <script src=\"https://maps.googleapis.com/maps/api/js?libraries=places\"></script>","    <script>","var map, placesList;","","function initialize() {","  var pyrmont = new google.maps.LatLng(-33.8665433, 151.1956316);","","  map = new google.maps.Map(document.getElementById('map-canvas'), {","    center: pyrmont,","    zoom: 17","  });","","  var request = {","    location: pyrmont,","    radius: 500,","    types: ['store']","  };","","  placesList = document.getElementById('places');","","  var service = new google.maps.places.PlacesService(map);","  service.nearbySearch(request, callback);","}","","function callback(results, status, pagination) {","  if (status != google.maps.places.PlacesServiceStatus.OK) {","    return;","  } else {","    createMarkers(results);","","    if (pagination.hasNextPage) {","      var moreButton = document.getElementById('more');","","      moreButton.disabled = false;","","      google.maps.event.addDomListenerOnce(moreButton, 'click',","          function() {","        moreButton.disabled = true;","        pagination.nextPage();","      });","    }","  }","}","","function createMarkers(places) {","  var bounds = new google.maps.LatLngBounds();","","  for (var i = 0, place; place = places[i]; i++) {","    var image = {","      url: place.icon,","      size: new google.maps.Size(71, 71),","      origin: new google.maps.Point(0, 0),","      anchor: new google.maps.Point(17, 34),","      scaledSize: new google.maps.Size(25, 25)","    };","","    var marker = new google.maps.Marker({","      map: map,","      icon: image,","      title: place.name,","      position: place.geometry.location","    });","","    placesList.innerHTML += '<li>' + place.name + '</li>';","","    bounds.extend(place.geometry.location);","  }","  map.fitBounds(bounds);","}","","google.maps.event.addDomListener(window, 'load', initialize);","","    </script>","    <style>","      #results {","        font-family: Arial, Helvetica, sans-serif;","        position: absolute;","        right: 5px;","        top: 50%;","        margin-top: -195px;","        height: 380px;","        width: 200px;","        padding: 5px;","        z-index: 5;","        border: 1px solid #999;","        background: #fff;","      }","      h2 {","        font-size: 22px;","        margin: 0 0 5px 0;","      }","      ul {","        list-style-type: none;","        padding: 0;","        margin: 0;","        height: 321px;","        width: 200px;","        overflow-y: scroll;","      }","      li {","        background-color: #f1f1f1;","        padding: 10px;","        text-overflow: ellipsis;","        white-space: nowrap;","        overflow: hidden;","      }","      li:nth-child(odd) {","        background-color: #fcfcfc;","      }","      #more {","        width: 100%;","        margin: 5px 0 0 0;","      }","    </style>","  </head>","  <body>","    <div id=\"map-canvas\"></div>","    <div id=\"results\">","      <h2>Results</h2>","      <ul id=\"places\"></ul>","      <button id=\"more\">More results</button>","    </div>","  </body>","</html>"]}]}],[{"group":"doc","deltas":[{"start":{"row":14,"column":12},"end":{"row":15,"column":0},"action":"insert","lines":["",""]},{"start":{"row":15,"column":0},"end":{"row":15,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":4},"end":{"row":16,"column":0},"action":"insert","lines":["",""]},{"start":{"row":16,"column":0},"end":{"row":16,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":14,"column":12},"end":{"row":15,"column":4},"action":"remove","lines":["","    "]}]}],[{"group":"doc","deltas":[{"start":{"row":14,"column":12},"end":{"row":15,"column":4},"action":"remove","lines":["","    "]}]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":14,"column":12},"end":{"row":14,"column":12},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1417791444266}